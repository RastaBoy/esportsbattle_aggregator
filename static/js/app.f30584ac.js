(function(){"use strict";var t={672:function(t,e,r){var a=r(144),n=r(726),o=r(259),s=r(102),i=r(536),l=function(){var t=this,e=t._self._c;return e(n.Z,[e(o.Z,{attrs:{app:"",color:"primary",dark:""}},[e("div",{staticClass:"d-flex align-center"},[e("h1",[t._v("ESportsBattle Site Aggregator")])]),e(i.Z),e("div",[e("h2",[t._v("Текущее время в UTC: "+t._s(t.utc_time))])])],1),e(s.Z,[e("AggregatorsInfo")],1)],1)},u=[],c=r(57),d=r(381),h=r(816),f=r(255),v=r(981),p=r(690),m=function(){var t=this,e=t._self._c;return e(h.Z,{attrs:{elevation:"2",shaped:""}},[e(f.EB,[e("h3",[t._v("Список новых матчей")])]),e(f.Qq,[e("h4",[t._v("Данное приложение собирает все новые матчи по дисциплинам CS2 и Футболу с сайта ESportsBattle.")])]),e(p.Z),t.error.state?e(c.Z,{attrs:{type:"error"}},[t._v(" "+t._s(t.error.message)+" ")]):t._e(),e(f.ZB,[t.loading?e("div",{staticStyle:{"text-align":"center"}},[e("Loader")],1):e("div",[e(v.Z,{staticClass:"elevation-1",attrs:{dense:"",headers:t.headers,items:t.matches}}),e(i.Z),e("div",{staticStyle:{"margin-top":"10px"}},[e(d.Z,{attrs:{color:"primary"},on:{click:function(e){return t.update_info()}}},[t._v("Обновить")])],1)],1)])],1)},g=[],_=r(629),y=function(){var t=this;t._self._c;return t._m(0)},b=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"lds-roller"},[e("div"),e("div"),e("div"),e("div"),e("div"),e("div"),e("div"),e("div")])}],w={name:"Loader"},Z=w,x=r(1),S=(0,x.Z)(Z,y,b,!1,null,"271cfb85",null),O=S.exports,P={name:"AggregatorsInfo",components:{Loader:O},data:()=>({loading:!0,error:{state:!1,message:""}}),async mounted(){while(this.loading)try{this.loading=!0,await this.$store.dispatch("load_matches"),this.loading=!1,this.error.state=!1;break}catch(t){console.log(t),this.error.state=!0,this.error.message=t.message,this.sleep(5e3)}},methods:{sleep(t){const e=Date.now();let r=null;do{r=Date.now()}while(r-e<t)},async update_info(){try{this.loading=!0,await this.$store.dispatch("load_matches"),this.loading=!1,this.error.state=!1}catch(t){console.log(t),this.error.state=!0,this.error.message=t.message,setTimeout((()=>{this.error.state=!1,this.error.message=""}),3e3)}}},computed:{...(0,_.Se)(["matches"]),headers(){return[{text:"id",align:"start",value:"id"},{text:"Дата",value:"date"},{text:"Время",value:"time"},{text:"Формат времени",value:"datetime_format"},{text:"Название дисциплины",value:"discipline_name"},{text:"Название чемпионата",value:"tournament_name"},{text:"Участник №1",value:"participant1_name"},{text:"Участник №2",value:"participant2_name"}]}}},j=P,C=(0,x.Z)(j,m,g,!1,null,null,null),T=C.exports,k={name:"App",components:{AggregatorsInfo:T},data:()=>({date:0}),mounted(){this.date=new Date},created(){this.intervalId=setInterval((()=>this.date=Date.now()),1e3)},beforeDestroy(){this.intervalId&&clearInterval(this.intervalId)},computed:{utc_time(){return new Date(this.date).toUTCString()}}},I=k,D=(0,x.Z)(I,l,u,!1,null,null,null),$=D.exports,A={actions:{async api_request({getters:t},{endpoint:e,headers:r,body:a}){let n={headers:r||{}};a&&(n.method="POST",n.headers["Content-type"]="application/json",n.body=JSON.stringify(a));let o=await fetch(t.url+"/api/v1"+e,n);if(o=await o.json(),o.result)return o.data;throw console.error(`Request ${e} failed: (${o.error_class}) ${o.error_text}`),new Error(o.error_text)}},getters:{url(){return""}}},E={state:{matches:[]},getters:{matches(t){return t.matches}},mutations:{set_matches(t,e){t.matches=e}},actions:{async load_matches(t){let e=await t.dispatch("api_request",{endpoint:"/matches/get_all"});return t.commit("set_matches",e),e}}};a.ZP.use(_.ZP);var q=new _.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{api:A,matches:E}}),B=r(986);a.ZP.use(B.Z);var L=new B.Z({});a.ZP.config.productionTip=!1,new a.ZP({store:q,vuetify:L,render:function(t){return t($)}}).$mount("#app")}},e={};function r(a){var n=e[a];if(void 0!==n)return n.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,r),o.exports}r.m=t,function(){var t=[];r.O=function(e,a,n,o){if(!a){var s=1/0;for(c=0;c<t.length;c++){a=t[c][0],n=t[c][1],o=t[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&o||s>=o)&&Object.keys(r.O).every((function(t){return r.O[t](a[l])}))?a.splice(l--,1):(i=!1,o<s&&(s=o));if(i){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[a,n,o]}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,o,s=a[0],i=a[1],l=a[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(l)var c=l(r)}for(e&&e(a);u<s.length;u++)o=s[u],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(c)},a=self["webpackChunkesportsbattle_front_vue"]=self["webpackChunkesportsbattle_front_vue"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(672)}));a=r.O(a)})();
//# sourceMappingURL=app.f30584ac.js.map